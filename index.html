<html>
<head>
<base href="https://cookie-clicker-adventure.com/">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Corgi Clicker Adventure</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
    body {
        background: linear-gradient(135deg, #1a1c2c 0%, #2b2e4a 100%);
        font-family: 'Press Start 2P', cursive;
        color: #fff;
        margin: 0;
        padding: 20px;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .game-container {
        max-width: 1200px;
        width: 100%;
        display: flex;
        gap: 40px;
        padding: 20px;
    }

    .game-left {
        flex: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .game-right {
        flex: 1;
        background: rgb(35,38,60);
        border-radius: 15px;
        padding: 20px;
    }

    .orbit-container {
        position: relative;
        width: 300px;
        height: 300px;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    #cookie {
        width: 200px;
        height: 200px;
        cursor: pointer;
        transition: transform 0.1s;
        filter: drop-shadow(0 0 10px #ffd700);
        animation: float 3s ease-in-out infinite;
        transform-origin: center;
        user-select: none;
        -webkit-user-select: none;
        -webkit-touch-callout: none;
        touch-action: manipulation;
    }

    .orbiting-item {
        position: absolute;
        width: 20px;
        height: 20px;
        animation: orbit linear infinite;
        transform-origin: 150px;
    }

    .orbiting-item img {
        width: 100%;
        height: 100%;
        filter: drop-shadow(0 0 2px #ffd700);
    }

    @keyframes orbit {
        from { transform: rotate(0deg) translateX(120px) rotate(0deg); }
        to { transform: rotate(360deg) translateX(120px) rotate(-360deg); }
    }

    @keyframes float {
        0% { transform: translateY(0px); }
        50% { transform: translateY(-20px); }
        100% { transform: translateY(0px); }
    }

    @keyframes clickPulse {
        0% { transform: scale(0.95); filter: brightness(1.5) drop-shadow(0 0 15px #ffd700); }
        50% { transform: scale(0.97); filter: brightness(1.2) drop-shadow(0 0 12px #ffd700); }
        100% { transform: scale(1); filter: brightness(1) drop-shadow(0 0 10px #ffd700); }
    }

    #cookie:active {
        transform: scale(0.95);
    }

    .click-effect {
        position: absolute;
        pointer-events: none;
        animation: clickEffect 0.5s ease-out forwards;
    }

    @keyframes clickEffect {
        0% { transform: scale(1.2); opacity: 1; }
        100% { transform: scale(0.8); opacity: 0; }
    }

    .stats {
        background: rgba(0, 0, 0, 0.5);
        padding: 20px;
        border-radius: 10px;
        margin: 20px 0;
        border: 2px solid #ffd700;
        text-align: center;
        width: 100%;
        box-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
    }

    #score {
        font-size: 1.5em;
        color: #ffd700;
        margin: 10px 0;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
    }

    #cps {
        font-size: 0.8em;
        color: #a0a0a0;
    }

    .shop-title {
        text-align: center;
        color: #ffd700;
        margin-bottom: 20px;
    }

    .shop-items {
        display: grid;
        gap: 15px;
    }

    .item {
        background: rgba(0, 0, 0, 0.5);
        border: 2px solid #4a4a4a;
        border-radius: 8px;
        padding: 15px;
        cursor: pointer;
        transition: all 0.3s;
        display: flex;
        align-items: center;
        gap: 15px;
    }

    .item:hover {
        border-color: #ffd700;
        transform: translateX(5px);
    }

    .item img {
        width: 40px;
        height: 40px;
        border-radius: 5px;
    }

    .item-info {
        flex-grow: 1;
    }

    .item-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 5px;
    }

    .info-icon {
        cursor: pointer;
        font-size: 0.8em;
        opacity: 0.7;
        transition: opacity 0.3s;
        color: #4CAF50; /* Make icon green */
    }

    .info-icon:hover {
        opacity: 1;
    }

    .item-name {
        font-size: 0.8em;
        color: #ffd700;
        margin-bottom: 5px;
    }

    .item-cost {
        font-size: 0.6em;
        color: #a0a0a0;
    }

    .item-owned {
        font-size: 0.7em;
        color: #4CAF50;
    }

    .particles {
        position: fixed;
        pointer-events: none;
    }

    @keyframes shine {
        0% { filter: brightness(1); }
        50% { filter: brightness(1.5); }
        100% { filter: brightness(1); }
    }

    .notification {
        position: fixed;
        top: 20px;
        right: 20px;
        background: rgba(255, 215, 0, 0.2);
        padding: 10px 20px;
        border-radius: 5px;
        border: 1px solid #ffd700;
        animation: fadeOut 2s forwards;
        pointer-events: none;
    }

    @keyframes fadeOut {
        to {
            opacity: 0;
            transform: translateY(-20px);
        }
    }

    @media (max-width: 768px) {
        .game-container {
            flex-direction: column;
            gap: 20px;
            padding: 10px;
        }

        .game-right {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 100;
            border-radius: 0;
            overflow-y: auto;
        }

        .shop-close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid #ffd700;
            color: #ffd700;
            padding: 5px 15px;
            border-radius: 8px;
            font-family: 'Press Start 2P', cursive;
            cursor: pointer;
            z-index: 101;
        }

        .shop-close-btn:hover {
            background: rgba(0, 0, 0, 0.7);
        }

        .shop-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(145deg, #ffd700, #ff9900);
            border: none;
            border-radius: 15px;
            padding: 10px 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-family: 'Press Start 2P', cursive;
            color: #1a1c2c;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
            z-index: 99;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .shop-toggle:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(255, 215, 0, 0.4);
        }
    }

    .cookie-stage-1 {
        filter: grayscale(0.8) brightness(0.8) drop-shadow(0 0 10px #ffd700);
    }

    .cookie-stage-2 {
        filter: grayscale(0.5) brightness(0.9) drop-shadow(0 0 12px #ffd700);
    }

    .cookie-stage-3 {
        filter: grayscale(0.2) brightness(1) drop-shadow(0 0 15px #ffd700);
    }

    .cookie-stage-4 {
        filter: grayscale(0) brightness(1.1) saturate(1.2) drop-shadow(0 0 20px #ffd700);
    }

    .cookie-stage-5 {
        filter: grayscale(0) brightness(1.2) saturate(1.5) drop-shadow(0 0 25px #ffd700);
        animation: rainbow-glow 5s infinite;
    }

    @keyframes rainbow-glow {
        0% { filter: grayscale(0) brightness(1.2) saturate(1.5) drop-shadow(0 0 25px #ffd700); }
        25% { filter: grayscale(0) brightness(1.2) saturate(1.5) drop-shadow(0 0 25px #ff7000); }
        50% { filter: grayscale(0) brightness(1.2) saturate(1.5) drop-shadow(0 0 25px #ff0000); }
        75% { filter: grayscale(0) brightness(1.2) saturate(1.5) drop-shadow(0 0 25px #ff7000); }
        100% { filter: grayscale(0) brightness(1.2) saturate(1.5) drop-shadow(0 0 25px #ffd700); }
    }

    .language-selector {
        position: fixed;
        top: 20px;
        right: 20px;
        display: flex;
        gap: 10px;
    }

    .flag {
        cursor: pointer;
        opacity: 0.7;
        transition: opacity 0.3s;
    }

    .flag:hover {
        opacity: 1;
    }

    .flag.active {
        opacity: 1;
        transform: scale(1.1);
    }

    .tooltip {
        position: fixed;
        background: rgba(0, 0, 0, 0.9);
        color: #ffd700;
        padding: 10px 15px;
        border-radius: 8px;
        border: 2px solid #ffd700;
        z-index: 1000;
        pointer-events: none;
        font-size: 0.8em;
        max-width: 200px;
    }
</style>
</head>
<body>
    <h1 style="color: #ffd700; text-shadow: 2px 2px 4px rgba(0,0,0,0.5);">Приключение Корги Кликер</h1>

    <div class="language-selector">
        <div class="flag" onclick="changeLanguage('en')">
            <img src="https://api.iconify.design/emojione:flag-for-united-states.svg" alt="English" width="32" height="32">
        </div>
        <div class="flag active" onclick="changeLanguage('ru')">
            <img src="https://api.iconify.design/emojione:flag-for-russia.svg" alt="Русский" width="32" height="32">
        </div>
    </div>

    <div class="game-container">
        <div class="game-left">
            <div class="orbit-container">
                <img id="cookie" class="cookie-stage-1" src="https://api.iconify.design/noto:dog-face.svg" alt="Corgi" onclick="clickCookie()">
                <div id="orbiting-items"></div>
            </div>
            <div class="stats">
                <div id="score">Treats: 0</div>
                <div id="cps">Per second: 0</div>
            </div>
            <div class="game-right">
                <h2 class="shop-title">🏪 Corgi Shop</h2>
                <div class="shop-items">
                    <div class="item" onclick="purchaseItem(0)">
                        <img src="https://api.iconify.design/noto:paw-prints.svg" alt="Paw">
                        <div class="item-info">
                            <div class="item-header">
                                <div class="item-name">Волшебная Лапа</div>
                                <div class="info-icon" onclick="event.stopPropagation(); showItemInfo('paw')">❔</div>
                            </div>
                            <div class="item-cost">Cost: <span id="paw-cost">10</span> treats</div>
                            <div class="item-owned" id="paw-count">Level: 0</div>
                        </div>
                    </div>
                    <div class="item" onclick="purchaseItem(1)">
                        <img src="https://api.iconify.design/noto:dog-face.svg" alt="Puppy">
                        <div class="item-info">
                            <div class="item-header">
                                <div class="item-name">Corgi Puppy</div>
                                <div class="info-icon" onclick="event.stopPropagation(); showItemInfo('puppy')">❔</div>
                            </div>
                            <div class="item-cost">Cost: <span id="puppy-cost">15</span> treats</div>
                            <div class="item-owned" id="puppy-count">Level: 0</div>
                        </div>
                    </div>

                    <div class="item" onclick="purchaseItem(2)">
                        <img src="https://api.iconify.design/noto:bowl-with-spoon.svg" alt="Bowl">
                        <div class="item-info">
                            <div class="item-header">
                                <div class="item-name">Treat Bowl</div>
                                <div class="info-icon" onclick="event.stopPropagation(); showItemInfo('bowl')">❔</div>
                            </div>
                            <div class="item-cost">Cost: <span id="bowl-cost">100</span> treats</div>
                            <div class="item-owned" id="bowl-count">Level: 0</div>
                        </div>
                    </div>

                    <div class="item" onclick="purchaseItem(3)">
                        <img src="https://api.iconify.design/emojione:teddy-bear.svg" alt="Toy">
                        <div class="item-info">
                            <div class="item-header">
                                <div class="item-name">Squeaky Toy</div>
                                <div class="info-icon" onclick="event.stopPropagation(); showItemInfo('toy')">❔</div>
                            </div>
                            <div class="item-cost">Cost: <span id="toy-cost">500</span> treats</div>
                            <div class="item-owned" id="toy-count">Level: 0</div>
                        </div>
                    </div>

                    <div class="item" onclick="purchaseItem(4)">
                        <img src="https://api.iconify.design/noto:sleeping-face.svg" alt="Bed">
                        <div class="item-info">
                            <div class="item-header">
                                <div class="item-name">Corgi Bed</div>
                                <div class="info-icon" onclick="event.stopPropagation(); showItemInfo('bed')">❔</div>
                            </div>
                            <div class="item-cost">Cost: <span id="bed-cost">1000</span> treats</div>
                            <div class="item-owned" id="bed-count">Level: 0</div>
                        </div>
                    </div>

                    <div class="item" onclick="purchaseItem(5)">
                        <img src="https://api.iconify.design/emojione:house.svg" alt="House">
                        <div class="item-info">
                            <div class="item-header">
                                <div class="item-name">Corgi House</div>
                                <div class="info-icon" onclick="event.stopPropagation(); showItemInfo('house')">❔</div>
                            </div>
                            <div class="item-cost">Cost: <span id="house-cost">5000</span> treats</div>
                            <div class="item-owned" id="house-count">Level: 0</div>
                        </div>
                    </div>

                    <div class="item" onclick="purchaseItem(6)">
                        <img src="https://api.iconify.design/noto:park.svg" alt="Park">
                        <div class="item-info">
                            <div class="item-header">
                                <div class="item-name">Corgi Park</div>
                                <div class="info-icon" onclick="event.stopPropagation(); showItemInfo('park')">❔</div>
                            </div>
                            <div class="item-cost">Cost: <span id="park-cost">20000</span> treats</div>
                            <div class="item-owned" id="park-count">Level: 0</div>
                        </div>
                    </div>
                </div>
                <button class="shop-close-btn">Закрыть</button>
            </div>
        </div>
    </div>

    <script>
        let cookies = 0;
        let cps = 0;
        let clickPower = 1;
        let items = [
            { name: 'paw', cost: 10, clickPower: 1, owned: 0 },
            { name: 'puppy', cost: 15, cps: 0.1, owned: 0 },
            { name: 'bowl', cost: 100, cps: 1, owned: 0 },
            { name: 'toy', cost: 500, cps: 5, owned: 0 },
            { name: 'bed', cost: 1000, cps: 10, owned: 0 },
            { name: 'house', cost: 5000, cps: 50, owned: 0 },
            { name: 'park', cost: 20000, cps: 200, owned: 0 }
        ];

        const cookieStages = [
            { threshold: 0, class: 'cookie-stage-1' },
            { threshold: 1000, class: 'cookie-stage-2' },
            { threshold: 10000, class: 'cookie-stage-3' },
            { threshold: 100000, class: 'cookie-stage-4' },
            { threshold: 1000000, class: 'cookie-stage-5' }
        ];

        const translations = {
            'en': {
                title: 'Corgi Clicker Adventure',
                cookies: 'Treats',
                perSecond: 'Per second',
                shop: '🏪 Corgi Shop',
                items: {
                    paw: {
                        name: 'Magic Paw',
                        owned: 'Level'
                    },
                    puppy: {
                        name: 'Corgi Puppy',
                        owned: 'Level'
                    },
                    bowl: {
                        name: 'Treat Bowl',
                        owned: 'Level'
                    },
                    toy: {
                        name: 'Squeaky Toy',
                        owned: 'Level'
                    },
                    bed: {
                        name: 'Corgi Bed',
                        owned: 'Level'
                    },
                    house: {
                        name: 'Corgi House',
                        owned: 'Level'
                    },
                    park: {
                        name: 'Corgi Park',
                        owned: 'Level'
                    }
                },
                cost: 'Cost',
                insufficientCookies: 'Not enough treats!',
                purchased: 'Purchased {item} for {cost} treats!'
            },
            'ru': {
                title: 'Приключение Корги Кликер',
                cookies: 'Лакомства',
                perSecond: 'В секунду',
                shop: '🏪 Магазин Корги',
                items: {
                    paw: {
                        name: 'Волшебная Лапа',
                        owned: 'Level'
                    },
                    puppy: {
                        name: 'Щенок Корги',
                        owned: 'Level'
                    },
                    bowl: {
                        name: 'Миска',
                        owned: 'Level'
                    },
                    toy: {
                        name: 'Пищащая игрушка',
                        owned: 'Level'
                    },
                    bed: {
                        name: 'Лежанка Корги',
                        owned: 'Level'
                    },
                    house: {
                        name: 'Домик Корги',
                        owned: 'Level'
                    },
                    park: {
                        name: 'Парк для Корги',
                        owned: 'Level'
                    }
                },
                cost: 'Цена',
                insufficientCookies: 'Недостаточно лакомств!',
                purchased: 'Куплено {item} за {cost} лакомств!'
            }
        };

        const itemDescriptions = {
            'en': {
                paw: "Increases click power by 1",
                puppy: "Generates 0.1 treats per second",
                bowl: "Generates 1 treat per second",
                toy: "Generates 5 treats per second", 
                bed: "Generates 10 treats per second",
                house: "Generates 50 treats per second",
                park: "Generates 200 treats per second"
            },
            'ru': {
                paw: "Увеличивает силу клика на 1",
                puppy: "Производит 0.1 лакомств в секунду",
                bowl: "Производит 1 лакомство в секунду",
                toy: "Производит 5 лакомств в секунду",
                bed: "Производит 10 лакомств в секунду", 
                house: "Производит 50 лакомств в секунду",
                park: "Производит 200 лакомств в секунду"
            }
        };

        let currentLanguage = 'ru'; 

        function changeLanguage(lang) {
            currentLanguage = lang;
            document.querySelectorAll('.flag').forEach(flag => flag.classList.remove('active'));
            document.querySelector(`.flag[onclick*="${lang}"]`).classList.add('active');
            document.title = translations[lang].title;
            document.querySelector('h1').textContent = translations[lang].title;
            document.querySelector('#score').textContent = `${translations[lang].cookies}: ${formatNumber(cookies)}`;
            document.querySelector('#cps').textContent = `${translations[lang].perSecond}: ${cps.toFixed(1)}`;
            document.querySelector('.shop-title').textContent = translations[lang].shop;

            updateDisplay();
        }

        function formatNumber(num) {
            if (num >= 1000000) {
                return (num/1000000).toFixed(1) + 'M';
            } else if (num >= 1000) {
                return (num/1000).toFixed(1) + 'K';
            }
            return Math.floor(num);
        }

        function updateDisplay() {
            document.getElementById('score').textContent = `${translations[currentLanguage].cookies}: ${formatNumber(cookies)}`;
            document.getElementById('cps').textContent = `${translations[currentLanguage].perSecond}: ${cps.toFixed(1)}`;
            
            const itemNames = ['paw', 'puppy', 'bowl', 'toy', 'bed', 'house', 'park'];
            itemNames.forEach((item, index) => {
                document.getElementById(`${item}-count`).textContent = `${translations[currentLanguage].items[item].owned}: Level ${items[index].owned}`;
                document.querySelector(`.item:nth-child(${index + 1}) .item-name`).textContent = translations[currentLanguage].items[item].name;
                document.querySelector(`.item:nth-child(${index + 1}) .item-cost`).textContent = `${translations[currentLanguage].cost}: ${items[index].cost}`;
            });
        }

        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = message;
            document.body.appendChild(notification);
            
            notification.addEventListener('animationend', () => {
                notification.remove();
            });
        }

        function updateCookieAppearance() {
            const cookie = document.getElementById('cookie');
            const currentStage = cookieStages
                .slice()
                .reverse()
                .find(stage => cookies >= stage.threshold);
                
            cookieStages.forEach(stage => {
                cookie.classList.remove(stage.class);
            });
            
            if (currentStage) {
                cookie.classList.add(currentStage.class);
            }
        }

        function createParticle(x, y) {
            for (let i = 0; i < 3; i++) {
                const particle = document.createElement('div');
                particle.className = 'particles';
                const offsetX = (Math.random() - 0.5) * 40;
                const offsetY = (Math.random() - 0.5) * 40;
                particle.style.left = (x + offsetX) + 'px';
                particle.style.top = (y + offsetY) + 'px';
                particle.style.fontSize = '20px';
                particle.textContent = '+1';
                particle.style.color = '#ffd700';
                document.body.appendChild(particle);

                const animation = particle.animate([
                    { transform: 'translateY(0) rotate(0deg)', opacity: 1 },
                    { transform: `translateY(-${50 + Math.random() * 50}px) rotate(${(Math.random() - 0.5) * 90}deg)`, opacity: 0 }
                ], {
                    duration: 1000 + Math.random() * 500,
                    iterations: 1,
                    easing: 'ease-out'
                });

                animation.onfinish = () => particle.remove();
            }
        }

        const orbitingItems = {
            paw: { duration: 4, delay: 0, clickInterval: 2000 },
            puppy: { duration: 5, delay: 0, clickInterval: 2000 },
            bowl: { duration: 7, delay: 0.5, clickInterval: 1000 },
            toy: { duration: 6, delay: 1, clickInterval: 800 },
            bed: { duration: 8, delay: 1.5, clickInterval: 1200 },
            house: { duration: 9, delay: 2, clickInterval: 600 },
            park: { duration: 4, delay: 2.5, clickInterval: 400 }
        };

        function addOrbitingItem(type) {
            const container = document.getElementById('orbiting-items');
            const item = document.createElement('div');
            item.className = 'orbiting-item';
            item.innerHTML = `<img src="https://api.iconify.design/${getItemIcon(type)}.svg" alt="${type}">`;
            item.style.animation = `orbit ${orbitingItems[type].duration}s linear infinite`;
            item.style.animationDelay = `${orbitingItems[type].delay}s`;
            container.appendChild(item);
        }

        function getItemIcon(type) {
            const icons = {
                paw: 'noto:paw-prints',
                puppy: 'noto:dog-face',
                bowl: 'noto:bowl-with-spoon',
                toy: 'emojione:teddy-bear',
                bed: 'noto:sleeping-face',
                house: 'emojione:house',
                park: 'noto:park'
            };
            return icons[type];
        }

        function createAutoClickEffect(orbitingItem) {
            const effect = document.createElement('div');
            effect.className = 'click-effect';
            effect.innerHTML = `<img src="https://api.iconify.design/noto:dog-face.svg" width="15" height="15">`;
            
            const rect = orbitingItem.getBoundingClientRect();
            effect.style.left = rect.left + 'px';
            effect.style.top = rect.top + 'px';
            
            document.body.appendChild(effect);
            
            cookies++;
            updateDisplay();
            updateCookieAppearance();
            
            effect.addEventListener('animationend', () => effect.remove());
        }

        function clickCookie() {
            cookies += clickPower;
            const cookie = document.getElementById('cookie');
            const rect = cookie.getBoundingClientRect();
            
            cookie.style.animation = 'none';
            cookie.offsetHeight;
            cookie.style.animation = 'float 3s ease-in-out infinite';
            cookie.animate([
                { transform: 'scale(0.95)', filter: 'brightness(1.5) drop-shadow(0 0 15px #ffd700)' },
                { transform: 'scale(0.97)', filter: 'brightness(1.2) drop-shadow(0 0 12px #ffd700)' },
                { transform: 'scale(1)', filter: 'brightness(1) drop-shadow(0 0 10px #ffd700)' }
            ], {
                duration: 300,
                easing: 'ease-out'
            });
            
            createParticle(rect.left + rect.width/2, rect.top);
            updateDisplay();
            updateCookieAppearance();
        }

        function purchaseItem(index) {
            const item = items[index];
            if (cookies >= item.cost) {
                cookies -= item.cost;
                item.owned++;
                if(item.owned === 1) {
                    addOrbitingItem(item.name);
                }
                item.cost = Math.ceil(item.cost * 1.15);
                if (item.clickPower) {
                    clickPower += item.clickPower;
                } else if (item.cps) {
                    cps += item.cps;
                }
                updateDisplay();
                showNotification(translations[currentLanguage].purchased.replace('{item}', translations[currentLanguage].items[item.name].name).replace('{cost}', item.cost));
            } else {
                showNotification(translations[currentLanguage].insufficientCookies);
            }
        }

        function saveGameState() {
            const gameState = {
                cookies: cookies,
                cps: cps,
                clickPower: clickPower,
                items: items
            };
            localStorage.setItem('cookieClickerState', JSON.stringify(gameState));
        }

        function loadGameState() {
            const savedState = localStorage.getItem('cookieClickerState');
            if (savedState) {
                const gameState = JSON.parse(savedState);
                cookies = gameState.cookies;
                cps = gameState.cps;
                clickPower = gameState.clickPower || 1;
                gameState.items.forEach((item, index) => {
                    items[index].owned = item.owned;
                    items[index].cost = item.cost;
                });
                
                document.getElementById('orbiting-items').innerHTML = '';
                
                items.forEach((item, index) => {
                    for (let i = 0; i < item.owned; i++) {
                        addOrbitingItem(item.name);
                    }
                });
                
                updateDisplay();
                updateCookieAppearance();
            }
        }

        setInterval(() => {
            cookies += cps;
            updateDisplay();
            updateCookieAppearance();
        }, 1000);

        setInterval(saveGameState, 30000);

        document.addEventListener('DOMContentLoaded', () => {
            loadGameState();
            document.querySelector('.game-right').style.display = 'none';
            changeLanguage('ru');
            initMobileShop();
            updateDisplay();
        });

        function initMobileShop() {
            const toggleBtn = document.createElement('button');
            toggleBtn.className = 'shop-toggle';
            toggleBtn.innerHTML = '🏪 Магазин';
            document.body.appendChild(toggleBtn);

            const closeBtn = document.querySelector('.shop-close-btn');
            closeBtn.textContent = 'Закрыть';

            toggleBtn.addEventListener('click', () => {
                const shop = document.querySelector('.game-right');
                shop.style.display = shop.style.display === 'none' ? 'block' : 'none';
            });

            closeBtn.addEventListener('click', () => {
                document.querySelector('.game-right').style.display = 'none';
            });
        }

        document.addEventListener('gesturestart', function(e) {
            e.preventDefault();
        });

        document.addEventListener('touchstart', function(e) {
            if (e.touches.length > 1) {
                e.preventDefault();
            }
        }, { passive: false });

        document.getElementById('cookie').addEventListener('selectstart', function(e) {
            e.preventDefault();
        });

        document.getElementById('cookie').addEventListener('contextmenu', function(e) {
            e.preventDefault();
        });

        function showItemInfo(itemType) {
            const existingTooltip = document.querySelector('.tooltip');
            if (existingTooltip) {
                existingTooltip.remove();
            }
            
            const tooltip = document.createElement('div');
            tooltip.className = 'tooltip';
            tooltip.textContent = itemDescriptions[currentLanguage][itemType];
            document.body.appendChild(tooltip);
            
            document.addEventListener('mousemove', moveTooltip);
            setTimeout(() => {
                tooltip.remove();
                document.removeEventListener('mousemove', moveTooltip);
            }, 3000);
        }

        function moveTooltip(e) {
            const tooltip = document.querySelector('.tooltip');
            if (tooltip) {
                tooltip.style.left = (e.pageX + 10) + 'px';
                tooltip.style.top = (e.pageY + 10) + 'px';
            }
        }
    </script>
</body>
</html>
