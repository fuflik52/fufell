<html><head><base href="." /><title>üéÉ SUPER SPOOKY Skibidi Chat üëª</title><style>
body {
    margin: 0;
    padding: 20px;
    background-color: #1a0f2e;
    background-image: 
        url("data:image/svg+xml,%3Csvg width='70' height='70' viewBox='0 0 70 70' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M35 35c0-5 5-5 5-5s-5 0-5-5 5-5 5-5-5 0-5-5 5-5 5-5' stroke='%23ff6b6b' stroke-width='2' fill='none' opacity='0.3'/%3E%3C/svg%3E");
    color: #ff6b6b;
    font-family: 'Creepster', cursive;
    min-height: 100vh;
    overflow-x: hidden;
    cursor: url("data:image/svg+xml,%3Csvg width='24' height='24' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z' fill='%23ff6b6b'/%3E%3C/svg%3E"), auto;
}

.container {
    max-width: 800px;
    margin: 0 auto;
    position: relative;
}

.chat-container {
    background: rgba(0, 0, 0, 0.7);
    border: 3px solid #ff6b6b;
    border-radius: 10px;
    padding: 20px;
    margin-top: 20px;
    position: relative;
    overflow: hidden;
    box-shadow: 0 0 20px #ff6b6b;
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0% { box-shadow: 0 0 20px #ff6b6b; }
    50% { box-shadow: 0 0 40px #ff6b6b; }
    100% { box-shadow: 0 0 20px #ff6b6b; }
}

.messages {
    height: 400px;
    overflow-y: auto;
    margin-bottom: 20px;
    padding: 10px;
    background: rgba(0, 0, 0, 0.5);
    border-radius: 8px;
}

.message {
    margin: 10px 0;
    padding: 10px;
    background: rgba(255, 107, 107, 0.1);
    border-radius: 5px;
    animation: spookyShake 0.5s ease-in;
    border: 1px solid rgba(255, 107, 107, 0.3);
    position: relative;
}

.message:hover {
    transform: scale(1.02);
    background: rgba(255, 107, 107, 0.2);
}

.message::before {
    content: 'üëª';
    position: absolute;
    right: -20px;
    top: 50%;
    transform: translateY(-50%);
    opacity: 0;
    transition: 0.3s;
}

.message:hover::before {
    opacity: 1;
    right: 10px;
}

.message img {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    margin-right: 10px;
    vertical-align: middle;
    border: 2px solid #ff6b6b;
    animation: spin 10s linear infinite;
}

@keyframes spin {
    100% { transform: rotate(360deg); }
}

.message span {
    color: #00ff00;
    font-weight: bold;
    text-shadow: 0 0 5px #00ff00;
}

.input-container {
    display: flex;
    gap: 10px;
}

input {
    flex: 1;
    padding: 15px;
    background: rgba(0, 0, 0, 0.5);
    border: 2px solid #ff6b6b;
    border-radius: 5px;
    color: #fff;
    font-size: 16px;
    font-family: 'Creepster', cursive;
    letter-spacing: 1px;
}

input:focus {
    outline: none;
    box-shadow: 0 0 15px #ff6b6b;
}

button {
    padding: 15px 30px;
    background: linear-gradient(45deg, #ff6b6b, #ff4444);
    border: none;
    border-radius: 5px;
    color: #000;
    cursor: pointer;
    font-family: 'Creepster', cursive;
    font-size: 18px;
    transition: all 0.3s;
    text-transform: uppercase;
    position: relative;
    overflow: hidden;
}

button:hover {
    transform: scale(1.1) rotate(5deg);
    background: linear-gradient(45deg, #ff4444, #ff2222);
}

button::after {
    content: 'üíÄ';
    position: absolute;
    right: -20px;
    top: 50%;
    transform: translateY(-50%);
    transition: 0.3s;
}

button:hover::after {
    right: 10px;
}

.floating-skibidi {
    position: absolute;
    pointer-events: none;
    animation: floatAndSpin 3s infinite ease-in-out;
    filter: drop-shadow(0 0 5px rgba(255, 107, 107, 0.5));
}

@keyframes floatAndSpin {
    0% { transform: translateY(0) rotate(0deg) scale(1); }
    50% { transform: translateY(-20px) rotate(180deg) scale(1.2); }
    100% { transform: translateY(0) rotate(360deg) scale(1); }
}

@keyframes spookyShake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-5px) rotate(-2deg); }
    75% { transform: translateX(5px) rotate(2deg); }
}

.online-users {
    position: fixed;
    right: 20px;
    top: 20px;
    background: rgba(0, 0, 0, 0.8);
    padding: 15px;
    border-radius: 10px;
    border: 2px solid #ff6b6b;
    animation: float 3s infinite ease-in-out;
}

.user {
    display: flex;
    align-items: center;
    gap: 10px;
    margin: 5px 0;
    padding: 5px;
    border-radius: 5px;
    background: rgba(255, 107, 107, 0.1);
    transition: 0.3s;
}

.user:hover {
    background: rgba(255, 107, 107, 0.2);
    transform: scale(1.05);
}

.spooky-title {
    text-align: center;
    font-size: 60px;
    color: #ff6b6b;
    text-shadow: 0 0 10px #ff6b6b;
    animation: crazyGlow 2s infinite;
    letter-spacing: 3px;
}

@keyframes crazyGlow {
    0% { text-shadow: 0 0 10px #ff6b6b; transform: scale(1) rotate(0deg); }
    25% { text-shadow: 0 0 20px #ff6b6b, 0 0 30px #ff0000; transform: scale(1.05) rotate(-2deg); }
    50% { text-shadow: 0 0 30px #ff6b6b, 0 0 40px #ff0000, 0 0 50px #ff0000; transform: scale(1.1) rotate(0deg); }
    75% { text-shadow: 0 0 20px #ff6b6b, 0 0 30px #ff0000; transform: scale(1.05) rotate(2deg); }
    100% { text-shadow: 0 0 10px #ff6b6b; transform: scale(1) rotate(0deg); }
}

::-webkit-scrollbar {
    width: 10px;
}

::-webkit-scrollbar-track {
    background: rgba(255, 107, 107, 0.1);
    border-radius: 5px;
}

::-webkit-scrollbar-thumb {
    background: #ff6b6b;
    border-radius: 5px;
}

::-webkit-scrollbar-thumb:hover {
    background: #ff4444;
}

.badge {
    position: fixed;
    left: 20px;
    top: 20px;
    width: 120px;
    height: 120px;
    background: radial-gradient(circle, #ff6b6b, #ff4444);
    border-radius: 50%;
    border: 4px solid #ff0000;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    animation: badgePulse 2s infinite;
    transform-style: preserve-3d;
    perspective: 1000px;
    box-shadow: 0 0 20px #ff0000;
}

.badge img {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    border: 3px solid #fff;
    animation: spinBadge 5s linear infinite;
}

.badge-text {
    font-size: 12px;
    color: #fff;
    text-shadow: 2px 2px 4px #000;
    text-align: center;
    margin-top: 5px;
    font-family: 'Creepster', cursive;
    animation: wobbleText 1s infinite;
}

@keyframes badgePulse {
    0% { transform: scale(1) rotate(0deg); }
    50% { transform: scale(1.1) rotate(5deg); }
    100% { transform: scale(1) rotate(0deg); }
}

@keyframes spinBadge {
    0% { transform: rotateY(0deg); }
    100% { transform: rotateY(360deg); }
}

@keyframes wobbleText {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-2px) rotate(-5deg); }
}

.user-badge {
    position: relative;
    display: inline-block;
    margin-right: 10px;
}

.user-badge img {
    width: 24px;
    height: 24px;
    border: 2px solid #ff0000;
    border-radius: 50%;
    animation: badgeSpinChat 3s linear infinite;
}

.user-badge::after {
    content: 'üçî';
    position: absolute;
    right: -10px;
    top: -10px;
    font-size: 12px;
    animation: burgerBounce 1s infinite;
}

@keyframes badgeSpinChat {
    0% { transform: rotate(0deg) scale(1); }
    50% { transform: rotate(180deg) scale(1.2); }
    100% { transform: rotate(360deg) scale(1); }
}

@keyframes burgerBounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-5px); }
}
</style>
<link href="https://fonts.googleapis.com/css2?family=Creepster&display=swap" rel="stylesheet">
</head>
<body>
<div class="badge">
    <img src="/a/2b7a32e2-f11d-4223-bc04-dc92bf10aec5" alt="Burger Badge Karvis">
    <div class="badge-text">BURGER MASTER KARVIS</div>
</div>

<div class="container">
    <h1 class="spooky-title">üéÉ Spooky Skibidi Chat üëª</h1>
    <div class="online-users" id="onlineUsers">
        <h3>Online Skibidis:</h3>
        <div id="usersList"></div>
    </div>
    <div class="chat-container">
        <div class="messages" id="messages"></div>
        <div class="input-container">
            <input type="text" id="messageInput" placeholder="Type your spooky message...">
            <button onclick="sendMessage()">Send üíÄ</button>
        </div>
    </div>
</div>

<script>
const room = new WebsimSocket();
const messages = document.getElementById('messages');
const messageInput = document.getElementById('messageInput');
const usersList = document.getElementById('usersList');

// Handle connected users
room.onPeersChanged = (peers) => {
    usersList.innerHTML = Object.values(peers)
        .map(peer => `
            <div class="user">
                <div class="user-badge">
                    <img src="${peer.username === 'KarvisSpelaa' ? '/a/2b7a32e2-f11d-4223-bc04-dc92bf10aec5' : peer.avatarUrl}" alt="avatar">
                </div>
                ${peer.username}
            </div>
        `).join('');
};

// Handle incoming messages
room.onmessage = (event) => {
    const data = event.data;
    if (data.type === 'chat') {
        addMessage(data);
    }
};

function addMessage(data) {
    const messageDiv = document.createElement('div');
    messageDiv.className = 'message';
    messageDiv.innerHTML = `
        <div class="user-badge">
            <img src="${data.username === 'KarvisSpelaa' ? '/a/2b7a32e2-f11d-4223-bc04-dc92bf10aec5' : data.avatarUrl}" alt="avatar">
        </div>
        <span>${data.username}:</span> ${data.message}
    `;
    messages.appendChild(messageDiv);
    messages.scrollTop = messages.scrollHeight;
    
    // Add floating skibidi
    addFloatingSkibidi();
}

function sendMessage() {
    const message = messageInput.value.trim();
    if (message) {
        room.send({
            type: 'chat',
            message: message,
            username: room.party.client.username,
            avatarUrl: room.party.client.avatarUrl
        });
        messageInput.value = '';
    }
}

function addFloatingSkibidi() {
    const skibidi = document.createElement('div');
    skibidi.className = 'floating-skibidi';
    skibidi.innerHTML = 'üëª';
    skibidi.style.fontSize = '30px';
    skibidi.style.left = Math.random() * window.innerWidth + 'px';
    document.body.appendChild(skibidi);
    
    setTimeout(() => {
        skibidi.remove();
    }, 3000);
}

messageInput.addEventListener('keypress', (e) => {
    if (e.key === 'Enter') {
        sendMessage();
    }
});

// Add some initial floating elements
for (let i = 0; i < 5; i++) {
    setTimeout(() => {
        const spookyEmoji = ['üéÉ', 'üëª', 'üíÄ', 'ü¶á', 'üï∑Ô∏è'][i];
        const floater = document.createElement('div');
        floater.className = 'floating-skibidi';
        floater.innerHTML = spookyEmoji;
        floater.style.fontSize = '30px';
        floater.style.left = Math.random() * window.innerWidth + 'px';
        floater.style.top = Math.random() * window.innerHeight + 'px';
        document.body.appendChild(floater);
    }, i * 1000);
}
</script>
</body></html>
