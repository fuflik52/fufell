<!DOCTYPE html>
<html>
<head>
    <base href="https://example.com" />
    <title>Spooky Puppy Clicker</title>
    <style>
        body {
            background-color: #1a0f2e;
            color: #ff6b1a;
            font-family: 'Creepster', cursive;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M15 15c2-2 6-2 6 0l2 20c0 2-4 4-6 2l-2-22M75 15c-2-2-6-2-6 0l-2 20c0 2 4 4 6 2l2-22' fill='%23ff6b1a33'/%3E%3C/svg%3E");
        }

        .dog-container {
            cursor: pointer;
            margin: 20px;
            transition: transform 0.1s;
            filter: drop-shadow(0 0 10px #ff6b1a);
            animation: spookyFloat 3s ease-in-out infinite;
        }

        .dog-container:active {
            transform: scale(0.95);
        }

        .stats {
            background-color: #2a1f3d;
            border: 2px solid #ff6b1a;
            border-radius: 15px;
            padding: 20px;
            margin: 20px;
            text-align: center;
            font-size: 1.2em;
            text-shadow: 0 0 5px #ff6b1a;
            box-shadow: 0 0 15px #ff6b1a33;
        }

        .menu-buttons {
            display: flex;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .menu-button {
            background-color: #ff6b1a;
            color: #1a0f2e;
            border: none;
            border-radius: 10px;
            padding: 15px 30px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.2s;
            font-family: 'Creepster', cursive;
            box-shadow: 0 0 10px #ff6b1a55;
        }

        .menu-button:hover {
            transform: scale(1.05);
            background-color: #ff8642;
            box-shadow: 0 0 20px #ff6b1a;
        }

        .dog {
            width: 120px;
            height: 120px;
        }

        #gameContainer {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #1a0f2e;
            z-index: 1000;
            overflow-y: auto;
            padding: 20px;
        }

        .resources {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(26, 15, 46, 0.9);
            padding: 15px;
            display: flex;
            justify-content: center;
            gap: 20px;
            backdrop-filter: blur(10px);
            z-index: 100;
            border-bottom: 2px solid #ff6b1a;
        }

        .city {
            margin-top: 70px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            padding-bottom: 70px;
        }

        .building {
            background: rgba(26, 15, 46, 0.9);
            border-radius: 15px;
            padding: 15px;
            text-align: center;
            backdrop-filter: blur(5px);
            border: 2px solid #ff6b1a;
            transition: transform 0.3s, box-shadow 0.3s;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .building:hover {
            transform: scale(1.05);
            box-shadow: 0 0 30px rgba(255, 107, 26, 0.5);
        }

        .building .icon {
            font-size: 3em;
            margin-bottom: 10px;
        }

        @keyframes float {
            0% {
                transform: translateY(0);
                opacity: 1;
            }
            100% {
                transform: translateY(-50px);
                opacity: 0;
            }
        }

        @keyframes spookyFloat {
            0% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(5deg); }
            100% { transform: translateY(0) rotate(0deg); }
        }

        .close-button {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #ff6b1a;
            color: #1a0f2e;
            border: none;
            border-radius: 10px;
            padding: 15px 30px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.2s;
            font-family: 'Creepster', cursive;
            box-shadow: 0 0 10px #ff6b1a55;
            z-index: 1001;
        }

        .close-button:hover {
            transform: scale(1.05);
            background-color: #ff8642;
            box-shadow: 0 0 20px #ff6b1a;
        }

        #wardrobeContainer .wardrobe-items {
            max-height: 70vh;
            overflow-y: auto;
            padding: 20px;
        }

        .items-container {
            max-height: 80vh;
            overflow-y: auto;
            padding: 20px;
        }

        .item {
            padding: 20px;
            background: rgba(255, 107, 26, 0.1);
            border: 2px solid #ff6b1a;
            border-radius: 10px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            position: relative;
            min-height: 80px;
        }

        .item-info {
            flex: 1;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .item .title {
            margin: 0 0 5px 0;
            font-size: 1.1em;
            word-wrap: break-word;
        }

        .item .details {
            font-size: 0.9em;
            margin: 0;
        }

        .item:hover {
            transform: scale(1.02);
            box-shadow: 0 8px 24px rgba(255, 107, 0, 0.3);
        }

        .icon {
            font-size: 2.5em;
            margin-right: 15px;
        }

        .question-mark {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            cursor: pointer;
            background: #ff6b1a;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .tooltip {
            display: none;
            position: absolute;
            background: rgba(26, 15, 46, 0.95);
            border: 1px solid #ff6b1a;
            padding: 10px;
            border-radius: 8px;
            z-index: 100;
            left: 50%;
            transform: translateX(-50%);
            top: 100%;
            margin-top: 10px;
            width: 200px;
        }

        .notification {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(to right, #ff6b1a, #ff8642);
            color: white;
            padding: 15px 30px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(255, 107, 26, 0.3);
            z-index: 2000;
            animation: slideUp 0.3s ease-out;
            display: none;
        }

        @keyframes slideUp {
            from {
                transform: translate(-50%, 100%);
                opacity: 0;
            }
            to {
                transform: translate(-50%, 0);
                opacity: 1;
            }
        }

        .claim-button {
            background: #ff6b1a;
            border: none;
            padding: 5px 15px;
            border-radius: 5px;
            color: white;
            cursor: pointer;
        }

        .building.elite {
            border: 2px solid gold;
            background: linear-gradient(135deg, rgba(255,107,26,0.2), rgba(255,215,0,0.2));
        }

        .elite-tag {
            position: absolute;
            top: -10px;
            right: -10px;
            background: gold;
            color: #1a0f2e;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.8em;
        }

        .new-tag {
            position: absolute;
            top: -10px;
            left: -10px;
            background: #ff6b1a;
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.8em;
        }

        .shop-categories {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center;
        }

        .category-button {
            background: #ff6b1a;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
        }

        .category-button.active {
            background: #ff8642;
        }

        .price {
            color: #4CAF50;
            font-weight: bold;
        }

        .achievements-list {
            margin-top: 20px;
        }

        .achievement {
            background: rgba(255, 107, 26, 0.1);
            border: 2px solid #ff6b1a;
            border-radius: 10px;
            padding: 10px;
            margin: 5px 0;
        }

        .achievement.completed {
            background: rgba(0, 255, 0, 0.1);
        }

        .quests-list {
            margin-top: 20px;
        }

        .quest {
            background: rgba(255, 107, 26, 0.1);
            border: 2px solid #ff6b1a;
            border-radius: 10px;
            padding: 10px;
            margin: 5px 0;
        }

        .progress {
            background: rgba(255, 107, 26, 0.3);
            border-radius: 5px;
            height: 10px;
            overflow: hidden;
        }

        .progress-bar {
            background: #4CAF50;
            height: 100%;
            transition: width 0.3s;
        }

        #wardrobeContainer {
            display: none;
            background: linear-gradient(135deg, #1a0f2e 0%, #2d1b36 100%);
            border: 2px solid #ff6b1a;
            border-radius: 15px;
            padding: 20px;
            max-width: 90vw;
            width: 800px;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1000;
        }

        .wardrobe-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center;
        }

        .wardrobe-tabs button {
            background: #ff6b1a;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
        }

        .wardrobe-tabs button.active {
            background: #ff8642;
        }

        .wardrobe-items {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .wardrobe-item {
            background: rgba(255, 107, 26, 0.1);
            border: 2px solid #ff6b1a;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }

        .preview {
            width: 100px;
            height: 100px;
            margin: 10px auto;
            border-radius: 50%;
            border: 2px solid #ff6b1a;
        }

        .energy-bar {
            position: fixed;
            top: 10px;
            left: 10px;
            width: 200px;
            height: 20px;
            background: rgba(46, 204, 113, 0.2); 
            border: 2px solid #2ecc71;
            border-radius: 10px;
            overflow: hidden;
            z-index: 1000;
        }

        .energy-fill {
            height: 100%;
            background: linear-gradient(90deg, #2ecc71, #27ae60);
            transition: width 0.3s;
        }

        .energy-text {
            position: absolute;
            width: 100%;
            text-align: center;
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
            line-height: 20px;
        }

        .energy-text::before {
            content: '⚡';
            margin-right: 5px;
        }

        @media (max-width: 768px) {
            .menu-buttons {
                display: flex;
                flex-direction: column;
                width: 100%;
                gap: 10px;
            }

            .menu-button {
                width: 100%;
                margin: 5px 0;
            }

            .stats {
                width: 90%;
            }

            .dog-container {
                transform: scale(0.8);
            }

            #shopContainer, #wardrobeContainer {
                width: 95%;
                max-height: 90vh;
                overflow-y: auto;
            }
        }

        .building.elite.spacestation {
            border: 2px solid #4CAF50;
            background: linear-gradient(135deg, rgba(76,175,80,0.1), rgba(76,175,80,0.2));
        }

        #shopContainer {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #1a0f2e;
            border: 2px solid #ff6b1a;
            border-radius: 15px;
            padding: 20px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            z-index: 1000;
        }

        .roulette-container {
            background: rgba(139, 0, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            overflow: hidden;
            position: relative;
            border: 2px solid #ff6b1a;
            box-shadow: 0 0 20px rgba(255, 107, 26, 0.3);
        }

        .roulette-window {
            position: relative;
            overflow: hidden;
            height: 180px;
        }

        .roulette-items {
            display: flex;
            transition: transform 3s cubic-bezier(0.1, 0.7, 0.2, 1);
            gap: 10px;
            padding: 20px 0;
        }

        .spin-btn {
            background: linear-gradient(45deg, #ff6b1a, #8b00ff);
            border: 2px solid #ff6b1a;
            box-shadow: 0 0 15px #ff6b1a;
            border-radius: 25px;
            color: white;
            padding: 15px 30px;
            font-size: 18px;
            cursor: pointer;
            margin: 20px 0;
            transition: all 0.3s ease;
            font-family: 'Creepster', cursive;
        }

        .action-btn {
            padding: 10px 20px;
            border: 2px solid #ff6b1a;
            border-radius: 5px;
            cursor: pointer;
            font-family: 'Creepster', cursive;
            margin: 5px;
        }

        .item.energy-item {
            background: rgba(76, 175, 80, 0.2);
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Creepster&display=swap" rel="stylesheet">
</head>
<body>
    <div class="energy-bar">
        <div class="energy-fill"></div>
        <div class="energy-text">⚡ 100/100</div>
    </div>

    <div class="dog-container" onclick="clickDog()">
        <svg class="dog" viewBox="0 0 100 100">
            <circle cx="50" cy="50" r="45" fill="#ff6b1a"/>
            <circle cx="40" cy="40" r="8" fill="#1a0f2e"/>
            <circle cx="60" cy="40" r="8" fill="#1a0f2e"/>
            <circle cx="50" cy="55" r="5" fill="#1a0f2e"/>
            <path d="M35,65 Q50,80 65,65" stroke="#1a0f2e" stroke-width="3" fill="none"/>
            <path d="M25,20 Q35,10 45,20" fill="#1a0f2e"/>
            <path d="M55,20 Q65,10 75,20" fill="#1a0f2e"/>
        </svg>
    </div>

    <div class="stats">
        <div>Тыквы: <span id="treats">0</span></div>
        <div>В секунду: <span id="perSecond">0.0</span></div>
        <div>Уровень: <span id="level">1</span></div>
        <div>Неоплаченные: <span id="unclaimed">0</span></div>
        <div>Энергия: <span id="energy">100</span>/<span>100</span></div>
    </div>

    <div class="menu-buttons">
        <button class="menu-button" onclick="openShop()">Магазин</button>
        <button class="menu-button" onclick="openAchievements()">Награды</button>
        <button class="menu-button" onclick="openQuests()">Задания</button>
        <button class="menu-button" onclick="openWardrobe()">Гардероб</button>
        <button class="menu-button" onclick="openTown()">Город</button>
    </div>

    <div id="shopContainer">
        <div class="shop-categories">
            <button class="category-button active" onclick="showCategory('regular')">Обычные предметы</button>
            <button class="category-button" onclick="showCategory('premium')">Премиум предметы</button>
        </div>
        <div class="items-container">
            <div id="regularItems" class="category-section">
                <div class="item">
                    <div class="item-info">
                        <div class="icon">🎃</div>
                        <div>
                            <h3 class="title">Маленькая тыква</h3>
                            <p class="details">Цена: 100 тыкв</p>
                            <p class="details">Бонус: +1 к клику</p>
                        </div>
                    </div>
                    <button class="menu-button" onclick="purchaseItem('treat1')">Купить</button>
                </div>
                <div class="item">
                    <div class="item-info">
                        <div class="icon">🎃</div>
                        <div>
                            <h3 class="title">Большая тыква</h3>
                            <p class="details">Цена: 500 тыкв</p>
                            <p class="details">Бонус: +5 к клику</p>
                        </div>
                    </div>
                    <button class="menu-button" onclick="purchaseItem('treat2')">Купить</button>
                </div>
                <div class="item">
                    <div class="item-info">
                        <div class="icon">🎃</div>
                        <div>
                            <h3 class="title">Золотая тыква</h3>
                            <p class="details">Цена: 2000 тыкв</p>
                            <p class="details">Бонус: +25 к клику</p>
                        </div>
                    </div>
                    <button class="menu-button" onclick="purchaseItem('treat3')">Купить</button>
                </div>
                <div class="item energy-item">
                    <div class="item-info">
                        <div class="icon">⚡</div>
                        <div>
                            <h3 class="title">Мистический энергетик</h3>
                            <p class="details">Цена: 1000 тыкв</p>
                            <p class="details">Бонус: +50 энергии</p>
                        </div>
                    </div>
                    <button class="menu-button" onclick="purchaseItem('energyBoost')">Купить</button>
                </div>
                <div class="item">
                    <div class="item-info">
                        <div class="icon">👻</div>
                        <div>
                            <h3 class="title">Призрачный автокликер</h3>
                            <p class="details">Цена: 5000 тыкв</p>
                            <p class="details">Бонус: +2 к клику</p>
                        </div>
                    </div>
                    <button class="menu-button" onclick="purchaseItem('autoClickerGhost')">Купить</button>
                </div>
                <div class="item">
                    <div class="item-info">
                        <div class="icon">🍀</div>
                        <div>
                            <h3 class="title">Амулет удачи</h3>
                            <p class="details">Цена: 3000 тыкв</p>
                            <p class="details">Бонус: +15 к клику</p>
                        </div>
                    </div>
                    <button class="menu-button" onclick="purchaseItem('luckyCharm')">Купить</button>
                </div>
                <div class="item">
                    <div class="item-info">
                        <div class="icon">🧪</div>
                        <div>
                            <h3 class="title">Зелье ведьмы</h3>
                            <p class="details">Цена: 7500 тыкв</p>
                            <p class="details">Бонус: +30 к клику</p>
                        </div>
                    </div>
                    <button class="menu-button" onclick="purchaseItem('witchBrew')">Купить</button>
                </div>
                <div class="item">
                    <div class="item-info">
                        <div class="icon">📖</div>
                        <div>
                            <h3 class="title">Книга заклинаний</h3>
                            <p class="details">Цена: 10000 тыкв</p>
                            <p class="details">Бонус: +40 к клику</p>
                        </div>
                    </div>
                    <button class="menu-button" onclick="purchaseItem('spellBook')">Купить</button>
                </div>
                <div class="item">
                    <div class="item-info">
                        <div class="icon">🔮</div>
                        <div>
                            <h3 class="title">Магический шар</h3>
                            <p class="details">Цена: 15000 тыкв</p>
                            <p class="details">Бонус: +50 к клику</p>
                        </div>
                    </div>
                    <button class="menu-button" onclick="purchaseItem('crystalBall')">Купить</button>
                </div>
                <div class="item">
                    <div class="item-info">
                        <div class="icon">🤖</div>
                        <div>
                            <h3 class="title">Базовый автокликер</h3>
                            <p class="details">Цена: 5000 тыкв</p>
                            <p class="details">Бонус: +1 к клику (Доступен на уровне 5)</p>
                        </div>
                    </div>
                    <button class="menu-button" onclick="purchaseItem('autoClickerBasic')">Купить</button>
                </div>
                <div class="item">
                    <div class="item-info">
                        <div class="icon">⚡</div>
                        <div>
                            <h3 class="title">Продвинутый автокликер</h3>
                            <p class="details">Цена: 15000 тыкв</p>
                            <p class="details">Бонус: +3 к клику (Доступен на уровне 7)</p>
                        </div>
                    </div>
                    <button class="menu-button" onclick="purchaseItem('autoClickerAdvanced')">Купить</button>
                </div>
                <div class="item">
                    <div class="item-info">
                        <div class="icon">💫</div>
                        <div>
                            <h3 class="title">Профессиональный автокликер</h3>
                            <p class="details">Цена: 50000 тыкв</p>
                            <p class="details">Бонус: +10 к клику (Доступен на уровне 10)</p>
                        </div>
                    </div>
                    <button class="menu-button" onclick="purchaseItem('autoClickerPro')">Купить</button>
                </div>
            </div>
            <div id="premiumItems" class="category-section" style="display:none">
                <div class="item">
                    <div class="item-info">
                        <div class="icon">✨🐕</div>
                        <div>
                            <h3 class="title">Золотой щенок</h3>
                            <p class="details">Цена: 10000 тыкв</p>
                            <p class="details">Бонус: +100 к клику</p>
                        </div>
                    </div>
                    <button class="menu-button" onclick="purchasePremiumItem('goldenPup')">Купить</button>
                </div>
                <div class="item">
                    <div class="item-info">
                        <div class="icon">🌈🐕</div>
                        <div>
                            <h3 class="title">Радужный щенок</h3>
                            <p class="details">Цена: 50000 тыкв</p>
                            <p class="details">Бонус: +500 к клику</p>
                        </div>
                    </div>
                    <button class="menu-button" onclick="purchasePremiumItem('rainbowPup')">Купить</button>
                </div>
                <div class="item">
                    <div class="item-info">
                        <div class="icon">👻🐕</div>
                        <div>
                            <h3 class="title">Призрачный щенок</h3>
                            <p class="details">Цена: 100000 тыкв</p>
                            <p class="details">Бонус: +1000 к клику</p>
                        </div>
                    </div>
                    <button class="menu-button" onclick="purchasePremiumItem('ghostPup')">Купить</button>
                </div>
                <div class="item">
                    <div class="item-info">
                        <div class="icon">🦇🐕</div>
                        <div>
                            <h3 class="title">Щенок-вампир</h3>
                            <p class="details">Цена: 150000 тыкв</p>
                            <p class="details">Бонус: +1500 к клику</p>
                        </div>
                    </div>
                    <button class="menu-button" onclick="purchasePremiumItem('vampirePup')">Купить</button>
                </div>
                <div class="item">
                    <div class="item-info">
                        <div class="icon">🧟‍♂️🐕</div>
                        <div>
                            <h3 class="title">Щенок-зомби</h3>
                            <p class="details">Цена: 200000 тыкв</p>
                            <p class="details">Бонус: +2000 к клику</p>
                        </div>
                    </div>
                    <button class="menu-button" onclick="purchasePremiumItem('zombiePup')">Купить</button>
                </div>
                <div class="item">
                    <div class="item-info">
                        <div class="icon">🧙‍♀️🐕</div>
                        <div>
                            <h3 class="title">Щенок-колдун</h3>
                            <p class="details">Цена: 250000 тыкв</p>
                            <p class="details">Бонус: +2500 к клику</p>
                        </div>
                    </div>
                    <button class="menu-button" onclick="purchasePremiumItem('witchPup')">Купить</button>
                </div>
            </div>
        </div>
        <button class="close-button" onclick="closeShop()">Закрыть</button>
    </div>

    <div id="wardrobeContainer">
        <button class="close-button" onclick="closeWardrobe()">Закрыть</button>
        <div class="wardrobe-tabs">
            <button onclick="showWardrobeTab('colors')">Цвета</button>
            <button onclick="showWardrobeTab('backgrounds')">Фоны</button>
            <button onclick="showWardrobeTab('cases')">Кейсы</button>
            <button onclick="showWardrobeTab('clickColors')">Цвета кликов</button>
        </div>
        <div class="wardrobe-items"></div>
    </div>

    <div id="gameContainer">
        <button class="close-button" onclick="closeTown()">Закрыть</button>
        <div class="resources">
            <div class="money">🎃 <span id="money">0</span></div>
            <div class="income">👻 <span id="income">0</span>/10сек</div>
            <div class="unclaimed">💰 <span id="unclaimedIncome">0</span></div>
            <button class="claim-button" onclick="claimIncome()">Получить (-10%)</button>
        </div>
        <div class="city">
            <div class="building">
                <div class="icon">👻</div>
                <h3>Призрачный дом</h3>
                <p>Стоимость: 10.0K 🎃</p>
                <p>Доход: 1.0K/10сек</p>
                <p>Принадлежит: <span id="ghostHouseCount">0</span></p>
                <button class="menu-button" onclick="buyBuilding('ghostHouse', 10000, 1000)">Купить</button>
            </div>
            <div class="building">
                <div class="icon">⚰️</div>
                <h3>Кладбище</h3>
                <span class="new-tag">New!</span>
                <p>Стоимость: 20.0K 🎃</p>
                <p>Доход: 2.0K/10сек</p>
                <p>Принадлежит: <span id="cemeteryCount">0</span></p>
                <button class="menu-button" onclick="buyBuilding('cemetery', 20000, 2000)">Купить</button>
            </div>
            <div class="building">
                <div class="icon">🏰</div>
                <h3>Замок Дракулы</h3>
                <span class="new-tag">New!</span>
                <p>Стоимость: 50.0K 🎃</p>
                <p>Доход: 5.0K/10сек</p>
                <p>Принадлежит: <span id="castleCount">0</span></p>
                <button class="menu-button" onclick="buyBuilding('castle', 50000, 5000)">Купить</button>
            </div>
            <div class="building elite">
                <div class="icon">🌀</div>
                <h3>Портал в ад</h3>
                <span class="new-tag">New!</span>
                <span class="elite-tag">Elite</span>
                <p>Стоимость: 100.0K 🎃</p>
                <p>Доход: 10.0K/10сек</p>
                <p>Принадлежит: <span id="portalCount">0</span></p>
                <button class="menu-button" onclick="buyBuilding('portal', 100000, 10000)">Купить</button>
            </div>
        </div>
    </div>

    <div class="notification" id="notification"></div>

    <script>
        // Game State Variables
        let treats = 0;
        let perSecond = 0;
        let clickPower = 1;
        let level = 1;
        let clicks = 0;
        let purchasedPremiumItems = [];
        let purchasedItems = [];
        let energy = {
            current: 100,
            max: 100,
            clickCost: 1,
            regenRate: 1
        };
        let purchasedWardrobeItems = {
            colors: [],
            backgrounds: [],
            cases: [],
            clickColors: []
        };
        let gameState = {
            money: 0,
            buildings: {},
            unclaimedIncome: 0
        };
        let shopItems = [
            // Regular Items
            { id: 'treat1', name: 'Маленькая тыква', price: 100, bonus: 1, type: 'click', category: 'regular' },
            { id: 'treat2', name: 'Большая тыква', price: 500, bonus: 5, type: 'click', category: 'regular' },
            { id: 'treat3', name: 'Золотая тыква', price: 2000, bonus: 25, type: 'click', category: 'regular' },
            { id: 'energyBoost', name: 'Мистический энергетик', price: 1000, energyBonus: 50, type: 'energy', category: 'regular' },
            { id: 'autoClickerGhost', name: 'Призрачный автокликер', price: 5000, bonus: 2, type: 'autoClicker', minLevel: 3, category: 'regular' },
            { id: 'luckyCharm', name: 'Амулет удачи', price: 3000, bonus: 15, type: 'click', category: 'regular' },
            { id: 'witchBrew', name: 'Зелье ведьмы', price: 7500, bonus: 30, type: 'click', category: 'regular' },
            { id: 'spellBook', name: 'Книга заклинаний', price: 10000, bonus: 40, type: 'click', category: 'regular' },
            { id: 'crystalBall', name: 'Магический шар', price: 15000, bonus: 50, type: 'click', category: 'regular' },
            { id: 'autoClickerBasic', name: 'Базовый автокликер', price: 5000, perSecond: 1, type: 'autoClicker', minLevel: 5, category: 'regular' },
            { id: 'autoClickerAdvanced', name: 'Продвинутый автокликер', price: 15000, perSecond: 3, type: 'autoClicker', minLevel: 7, category: 'regular' },
            { id: 'autoClickerPro', name: 'Профессиональный автокликер', price: 50000, perSecond: 10, type: 'autoClicker', minLevel: 10, category: 'regular' },
            // Premium Items
            { id: 'goldenPup', name: 'Золотой щенок', price: 10000, bonus: 100, type: 'click', category: 'premium' },
            { id: 'rainbowPup', name: 'Радужный щенок', price: 50000, bonus: 500, type: 'click', category: 'premium' },
            { id: 'ghostPup', name: 'Призрачный щенок', price: 100000, bonus: 1000, type: 'click', category: 'premium' },
            { id: 'vampirePup', name: 'Щенок-вампир', price: 150000, bonus: 1500, type: 'click', category: 'premium' },
            { id: 'zombiePup', name: 'Щенок-зомби', price: 200000, bonus: 2000, type: 'click', category: 'premium' },
            { id: 'witchPup', name: 'Щенок-колдун', price: 250000, bonus: 2500, type: 'click', category: 'premium' }
        ];
        let achievements = [
            { id: 'ach1', name: 'Начало пути', description: 'Начните игру', reward: 100, completed: false },
            { id: 'ach2', name: '100 кликов', description: 'Кликните 100 раз', reward: 500, completed: false },
            { id: 'ach3', name: 'Копилка', description: 'Накопите 1000 тыкв', reward: 200, completed: false }
        ];
        let quests = [
            {
                id: 'quest1',
                name: 'Начинающий кликер',
                description: 'Кликни 100 раз',
                target: 100,
                reward: 500,
                progress: 0,
                type: 'clicks',
                completed: false
            },
            {
                id: 'quest2',
                name: 'Копилка тыкв',
                description: 'Накопи 1000 тыкв',
                target: 1000,
                reward: 200,
                progress: 0,
                type: 'treats',
                completed: false
            },
            {
                id: 'quest3',
                name: 'Энергичный щенок',
                description: 'Потрать 500 энергии',
                target: 500,
                reward: 1000,
                progress: 0,
                type: 'energy',
                completed: false
            }
        ];

        let wardrobeItems = {
            colors: [
                { id: 'color1', name: 'Красный', color: '#ff0000', price: 1000 },
                { id: 'color2', name: 'Синий', color: '#0000ff', price: 1000 },
                { id: 'color3', name: 'Зеленый', color: '#00ff00', price: 1000 },
                { id: 'color4', name: 'Золотой', color: '#ffd700', price: 2000 },
                { id: 'color5', name: 'Радужный', color: 'linear-gradient(45deg, red,orange,yellow,green,blue,indigo,violet)', price: 5000 }
            ],
            backgrounds: [
                { id: 'bg1', name: 'Туманный лес', background: '#2d1b36', price: 1000 },
                { id: 'bg2', name: 'Темное подземелье', background: '#1a0f2e', price: 1000 },
                { id: 'bg3', name: 'Кладбище', background: '#2a1f3d', price: 1000 },
                { id: 'bg4', name: 'Замок вампира', background: '#3d2b4a', price: 2000 },
                { id: 'bg5', name: 'Портал в ад', background: '#4a3b5d', price: 5000 }
            ],
            clickColors: [
                { id: 'click1', name: 'Огненный', clickColor: '#ff4400', price: 1000 },
                { id: 'click2', name: 'Ледяной', clickColor: '#00ccff', price: 1000 },
                { id: 'click3', name: 'Ядовитый', clickColor: '#00ff44', price: 1000 },
                { id: 'click4', name: 'Электрический', clickColor: '#ffff00', price: 2000 },
                { id: 'click5', name: 'Мистический', clickColor: '#ff00ff', price: 5000 }
            ],
            cases: [
                { id: 'case1', name: 'Обычный кейс', price: 1000, items: ['color1', 'bg1', 'click1'] },
                { id: 'case2', name: 'Редкий кейс', price: 2000, items: ['color2', 'bg2', 'click2'] },
                { id: 'case3', name: 'Эпический кейс', price: 5000, items: ['color3', 'bg3', 'click3'] },
                { id: 'case4', name: 'Легендарный кейс', price: 10000, items: ['color4', 'bg4', 'click4'] },
                { id: 'case5', name: 'Мифический кейс', price: 20000, items: ['color5', 'bg5', 'click5'] }
            ]
        };

        // Purchase Regular Item
        function purchaseItem(itemId) {
            const item = shopItems.find(i => i.id === itemId && i.category === 'regular');
            if (!item) return;

            if (treats >= item.price) {
                if (item.minLevel && level < item.minLevel) {
                    showNotification(`Требуется уровень ${item.minLevel}!`);
                    return;
                }

                treats -= item.price;
                purchasedItems.push(itemId);

                if (item.type === 'click') {
                    clickPower += item.bonus;
                } else if (item.type === 'energy') {
                    energy.current = Math.min(energy.current + item.energyBonus, energy.max);
                } else if (item.type === 'autoClicker') {
                    perSecond += item.perSecond || 0;
                }

                updateDisplay();
                saveGame();
                showNotification(`Куплено: ${item.name}`);
            } else {
                showNotification('Недостаточно тыкв!');
            }
        }

        // Purchase Premium Item
        function purchasePremiumItem(itemId) {
            const item = shopItems.find(i => i.id === itemId && i.category === 'premium');
            if (!item) return;

            if (treats >= item.price) {
                treats -= item.price;
                purchasedPremiumItems.push(itemId);

                if (item.type === 'click') {
                    clickPower += item.bonus;
                }

                updateDisplay();
                saveGame();
                showNotification(`Куплено: ${item.name}`);
            } else {
                showNotification('Недостаточно тыкв!');
            }
        }

        // Purchase Wardrobe Item
        function purchaseWardrobeItem(category, itemId) {
            const item = wardrobeItems[category].find(i => i.id === itemId);
            if (!item) return;

            if (treats >= item.price) {
                treats -= item.price;
                purchasedWardrobeItems[category].push(itemId);

                // Apply the wardrobe item effect here
                // For example, change dog color, background, etc.
                // This implementation depends on the specific game mechanics

                updateDisplay();
                saveGame();
                showNotification(`Куплено: ${item.name}`);
            } else {
                showNotification('Недостаточно тыкв!');
            }
        }

        // Save Game to Local Storage
        function saveGame() {
            const gameData = {
                treats,
                perSecond,
                clickPower,
                level,
                clicks,
                energy,
                purchasedItems,
                purchasedPremiumItems,
                purchasedWardrobeItems,
                gameState,
                achievements,
                quests
            };
            localStorage.setItem('gameData', JSON.stringify(gameData));
        }

        // Load Game from Local Storage
        function loadGame() {
            const savedData = localStorage.getItem('gameData');
            if (savedData) {
                const data = JSON.parse(savedData);
                treats = data.treats || 0;
                perSecond = data.perSecond || 0;
                clickPower = data.clickPower || 1;
                level = data.level || 1;
                clicks = data.clicks || 0;
                energy = data.energy || {current: 100, max: 100, clickCost: 1, regenRate: 1};
                purchasedItems = data.purchasedItems || [];
                purchasedPremiumItems = data.purchasedPremiumItems || [];
                purchasedWardrobeItems = data.purchasedWardrobeItems || {
                    colors: [],
                    backgrounds: [],
                    cases: [],
                    clickColors: []
                };
                gameState = data.gameState || {money: 0, buildings: {}, unclaimedIncome: 0};
                achievements = data.achievements || [];
                quests = data.quests || [
                    {
                        id: 'quest1',
                        name: 'Начинающий кликер',
                        description: 'Кликни 100 раз',
                        target: 100,
                        reward: 500,
                        progress: 0,
                        type: 'clicks',
                        completed: false
                    },
                    {
                        id: 'quest2',
                        name: 'Копилка тыкв',
                        description: 'Накопи 1000 тыкв',
                        target: 1000,
                        reward: 200,
                        progress: 0,
                        type: 'treats',
                        completed: false
                    },
                    {
                        id: 'quest3',
                        name: 'Энергичный щенок',
                        description: 'Потрать 500 энергии',
                        target: 500,
                        reward: 1000,
                        progress: 0,
                        type: 'energy',
                        completed: false
                    }
                ];
            }
            updateDisplay();
        }

        // Format Number with K and M
        function formatNumber(num) {
            if (num >= 1000000) {
                return (num / 1000000).toFixed(1) + 'M';
            } else if (num >= 1000) {
                return (num / 1000).toFixed(1) + 'K';
            }
            return num.toString();
        }

        // Update Display
        function updateDisplay() {
            // Update basic stats
            document.getElementById('treats').textContent = formatNumber(treats);
            document.getElementById('perSecond').textContent = formatNumber(perSecond);
            document.getElementById('level').textContent = level;
            document.getElementById('unclaimed').textContent = formatNumber(gameState.unclaimedIncome);
            document.getElementById('energy').textContent = energy.current;

            // Update energy bar
            const energyFill = document.querySelector('.energy-fill');
            const energyText = document.querySelector('.energy-text');
            if (energyFill && energyText) {
                const percentage = (energy.current / energy.max) * 100;
                energyFill.style.width = `${percentage}%`;
                energyText.textContent = `⚡ ${energy.current}/${energy.max}`;
            }

            // Update buildings in town if game container is open
            if (document.getElementById('gameContainer').style.display === 'block') {
                document.getElementById('money').textContent = formatNumber(gameState.money);
                document.getElementById('income').textContent = formatNumber(calculateTotalIncome());
                document.getElementById('unclaimedIncome').textContent = formatNumber(gameState.unclaimedIncome);
                document.getElementById('ghostHouseCount').textContent = gameState.buildings.ghostHouse || 0;
                document.getElementById('cemeteryCount').textContent = gameState.buildings.cemetery || 0;
                document.getElementById('castleCount').textContent = gameState.buildings.castle || 0;
                document.getElementById('portalCount').textContent = gameState.buildings.portal || 0;
            }

            // Update achievements in achievements window if open
            const achievementsWindow = document.querySelector('.achievements-list');
            if (achievementsWindow) {
                achievementsWindow.innerHTML = achievements.map(achievement => `
                    <div class="achievement ${achievement.completed ? 'completed' : ''}" id="${achievement.id}">
                        <h3>${achievement.name}</h3>
                        <p>${achievement.description}</p>
                        <p>Награда: ${achievement.reward} тыкв</p>
                        ${achievement.completed ? '<span style="color: #4CAF50;">✓ Выполнено</span>' : ''}
                    </div>
                `).join('');
            }

            // Update quests in quests window if open
            const questsWindow = document.querySelector('.quests-list');
            if (questsWindow) {
                questsWindow.innerHTML = quests.map(quest => `
                    <div class="quest ${quest.completed ? 'completed' : ''}" id="${quest.id}">
                        <h3>${quest.name}</h3>
                        <p>${quest.description}</p>
                        <p>Награда: ${quest.reward} тыкв</p>
                        <div class="progress">
                            <div class="progress-bar" style="width: ${(quest.progress / quest.target) * 100}%"></div>
                        </div>
                        <p>${quest.progress}/${quest.target}</p>
                    </div>
                `).join('');
            }

            // Update wardrobe items if wardrobe is open
            if (document.getElementById('wardrobeContainer').style.display === 'block') {
                // Depending on the active tab, apply the wardrobe items
                // This implementation can be expanded based on specific game mechanics
            }
        }

        // Calculate Total Income from Buildings
        function calculateTotalIncome() {
            let total = 0;
            const buildings = {
                ghostHouse: { income: 1000 },
                cemetery: { income: 2000 },
                castle: { income: 5000 },
                portal: { income: 10000 }
            };

            for (let buildingType in gameState.buildings) {
                if (buildings[buildingType]) {
                    total += buildings[buildingType].income * (gameState.buildings[buildingType] || 0);
                }
            }
            return total;
        }

        // Create Floating Number Animation
        function createFloatingNumber(amount) {
            const floatingNumber = document.createElement('div');
            floatingNumber.textContent = `+${formatNumber(amount)}`;
            floatingNumber.style.position = 'absolute';
            floatingNumber.style.left = '50%';
            floatingNumber.style.top = '50%';
            floatingNumber.style.transform = 'translate(-50%, -50%)';
            floatingNumber.style.color = '#ff6b1a';
            floatingNumber.style.fontSize = '24px';
            floatingNumber.style.pointerEvents = 'none';
            floatingNumber.style.animation = 'float 1s ease-out forwards';
            document.body.appendChild(floatingNumber);
            setTimeout(() => floatingNumber.remove(), 1000);
        }

        // Check Level Up
        function checkLevelUp() {
            const requiredClicks = Math.floor(100 * Math.pow(1.5, level - 1));
            if (clicks >= requiredClicks) {
                level++;
                showNotification(`Уровень повышен! Теперь у вас ${level} уровень!`);
                clicks = 0;
            }
        }

        // Update Quest Progress
        function updateQuestProgress(type, amount) {
            quests.forEach(quest => {
                if (quest.type === type && !quest.completed) {
                    quest.progress += amount;
                    if (quest.progress >= quest.target) {
                        quest.progress = quest.target;
                        quest.completed = true;
                        treats += quest.reward;
                        showNotification(`Задание выполнено! Получено ${quest.reward} тыкв!`);
                        checkAchievements();
                    }
                }
            });
            updateDisplay();
            saveGame();
        }

        // Check Achievements
        function checkAchievements() {
            achievements.forEach(achievement => {
                if (!achievement.completed) {
                    if (achievement.id === 'ach1') {
                        // Start of game, when treats > 0
                        if (treats > 0) {
                            achievement.completed = true;
                            showNotification(`Достижение выполнено: ${achievement.name}`);
                        }
                    } else if (achievement.id === 'ach2') {
                        // 100 clicks
                        if (clicks >= 100) {
                            achievement.completed = true;
                            treats += achievement.reward;
                            showNotification(`Достижение выполнено: ${achievement.name}`);
                        }
                    } else if (achievement.id === 'ach3') {
                        // 1000 treats
                        if (treats >= 1000) {
                            achievement.completed = true;
                            treats += achievement.reward;
                            showNotification(`Достижение выполнено: ${achievement.name}`);
                        }
                    }
                }
            });
        }

        // Buy Building
        function buyBuilding(buildingType, cost, income) {
            if (gameState.money >= cost) {
                gameState.money -= cost;
                if (!gameState.buildings[buildingType]) {
                    gameState.buildings[buildingType] = 0;
                }
                gameState.buildings[buildingType]++;
                showNotification(`Куплено здание: ${translateBuildingName(buildingType)}`);
                updateDisplay();
                saveGame();
            } else {
                showNotification('Недостаточно тыкв для покупки здания!');
            }
        }

        // Translate Building Names for Notifications
        function translateBuildingName(buildingType) {
            const translations = {
                ghostHouse: 'Призрачный дом',
                cemetery: 'Кладбище',
                castle: 'Замок Дракулы',
                portal: 'Портал в ад'
            };
            return translations[buildingType] || buildingType;
        }

        // Claim Income
        function claimIncome() {
            if (gameState.unclaimedIncome > 0) {
                const claimAmount = Math.floor(gameState.unclaimedIncome * 0.9); // 10% tax
                gameState.money += claimAmount;
                gameState.unclaimedIncome = 0;
                showNotification(`Получено ${formatNumber(claimAmount)} тыкв`);
                updateDisplay();
                saveGame();
            } else {
                showNotification('Нет неоплаченной прибыли для получения!');
            }
        }

        // Energy Regeneration
        setInterval(() => {
            if (energy.current < energy.max) {
                energy.current = Math.min(energy.current + energy.regenRate, energy.max);
                updateDisplay();
                saveGame();
            }
        }, 1000);

        // Auto-Clicker Functionality
        setInterval(() => {
            if (perSecond > 0) {
                treats += perSecond;
                clicks += perSecond;
                gameState.unclaimedIncome += perSecond;

                // Update quests
                updateQuestProgress('clicks', perSecond);
                updateQuestProgress('treats', perSecond);

                createFloatingNumber(perSecond);
                updateDisplay();
                saveGame();
            }
        }, 1000);

        // Initialize Game
        window.onload = function() {
            loadGame();
            updateDisplay();
            showShopCategory('regular'); // Show regular items by default
        };

        // Show Notification
        function showNotification(message) {
            const notification = document.getElementById('notification');
            if (notification) {
                notification.textContent = message;
                notification.style.display = 'block';
                setTimeout(() => {
                    notification.style.display = 'none';
                }, 3000);
            }
        }

        // Show Wardrobe Items
        function showWardrobeItems(category, items) {
            const container = document.querySelector('.wardrobe-items');
            if (!container) return;

            container.innerHTML = items.map(item => `
                <div class="wardrobe-item">
                    <div class="preview" style="background: ${item.color || item.background || item.clickColor};"></div>
                    <h3>${item.name}</h3>
                    <p>Цена: ${formatNumber(item.price)} тыкв</p>
                    ${purchasedWardrobeItems[category].includes(item.id) ?
                        '<button class="menu-button" disabled>Куплено</button>' :
                        `<button class="menu-button" onclick="purchaseWardrobeItem('${category}', '${item.id}')">Купить</button>`
                    }
                </div>
            `).join('');
        }

        // Show Shop Category
        function showCategory(category) {
            document.querySelectorAll('.category-button').forEach(button => {
                button.classList.remove('active');
            });
            document.querySelector(`.category-button[onclick*="${category}"]`).classList.add('active');

            document.querySelectorAll('.category-section').forEach(section => {
                section.style.display = 'none';
            });

            if (category === 'regular') {
                document.getElementById('regularItems').style.display = 'block';
            } else if (category === 'premium') {
                document.getElementById('premiumItems').style.display = 'block';
            }
        }

        // Show Wardrobe Tab
        function showWardrobeTab(category) {
            // Update active tab
            document.querySelectorAll('.wardrobe-tabs button').forEach(button => {
                button.classList.remove('active');
            });
            document.querySelector(`.wardrobe-tabs button[onclick*="${category}"]`).classList.add('active');

            // Show items for selected category
            showWardrobeItems(category, wardrobeItems[category]);
        }

        // Open and Close Shop
        function openShop() {
            document.getElementById('shopContainer').style.display = 'block';
        }

        function closeShop() {
            document.getElementById('shopContainer').style.display = 'none';
        }

        // Open and Close Achievements
        function openAchievements() {
            const achievementsWindow = document.createElement('div');
            achievementsWindow.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: #1a0f2e;
                border: 2px solid #ff6b1a;
                border-radius: 15px;
                padding: 20px;
                width: 90%;
                max-width: 800px;
                max-height: 90vh;
                overflow-y: auto;
                z-index: 1000;
            `;

            achievementsWindow.innerHTML = `
                <h2 style="color: #ff6b1a; text-align: center;">Награды</h2>
                <div class="achievements-list">
                    ${achievements.map(achievement => `
                        <div class="achievement ${achievement.completed ? 'completed' : ''}" id="${achievement.id}">
                            <h3>${achievement.name}</h3>
                            <p>${achievement.description}</p>
                            <p>Награда: ${achievement.reward} тыкв</p>
                            ${achievement.completed ? '<span style="color: #4CAF50;">✓ Выполнено</span>' : ''}
                        </div>
                    `).join('')}
                </div>
                <button class="close-button" onclick="this.parentElement.remove()">Закрыть</button>
            `;

            document.body.appendChild(achievementsWindow);
        }

        // Open and Close Quests
        function openQuests() {
            const questsWindow = document.createElement('div');
            questsWindow.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: #1a0f2e;
                border: 2px solid #ff6b1a;
                border-radius: 15px;
                padding: 20px;
                width: 90%;
                max-width: 800px;
                max-height: 90vh;
                overflow-y: auto;
                z-index: 1000;
            `;

            questsWindow.innerHTML = `
                <h2 style="color: #ff6b1a; text-align: center;">Задания</h2>
                <div class="quests-list">
                    ${quests.map(quest => `
                        <div class="quest ${quest.completed ? 'completed' : ''}" id="${quest.id}">
                            <h3>${quest.name}</h3>
                            <p>${quest.description}</p>
                            <p>Награда: ${quest.reward} тыкв</p>
                            <div class="progress">
                                <div class="progress-bar" style="width: ${(quest.progress / quest.target) * 100}%"></div>
                            </div>
                            <p>${quest.progress}/${quest.target}</p>
                        </div>
                    `).join('')}
                </div>
                <button class="close-button" onclick="this.parentElement.remove()">Закрыть</button>
            `;

            document.body.appendChild(questsWindow);
        }

        // Open and Close Wardrobe
        function openWardrobe() {
            document.getElementById('wardrobeContainer').style.display = 'block';
            showWardrobeTab('colors'); // Show colors tab by default
        }

        function closeWardrobe() {
            document.getElementById('wardrobeContainer').style.display = 'none';
        }

        // Open and Close Town
        function openTown() {
            document.getElementById('gameContainer').style.display = 'block';
            updateDisplay();
        }

        function closeTown() {
            document.getElementById('gameContainer').style.display = 'none';
        }

        // Click Dog Functionality
        function clickDog() {
            if (energy.current >= energy.clickCost) {
                energy.current -= energy.clickCost;
                energy.spent += energy.clickCost;

                const baseClick = clickPower;
                treats += baseClick;
                clicks++;

                // Update quests
                updateQuestProgress('clicks', 1);
                updateQuestProgress('treats', baseClick);
                updateQuestProgress('energy', energy.clickCost);

                // Check for level up
                checkLevelUp();

                // Create floating number animation
                createFloatingNumber(baseClick);

                // Update display
                updateDisplay();

                // Save game
                saveGame();
            } else {
                showNotification('Недостаточно энергии!');
            }
        }
    </script>
</body>
</html>
